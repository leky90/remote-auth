(self.webpackChunkauth=self.webpackChunkauth||[]).push([[162],{1162:(e,t,r)=>{r.r(t),r.d(t,{axiosInstance:()=>a,queryClient:()=>i,useGetProfileQuery:()=>l,useGetUsersQuery:()=>h,useSignInMutation:()=>c});var n=r(8911),u=r(3356),o=r(2318),s=r(8430),i=new o.QueryClient({defaultOptions:{queries:{retry:0}}}),a=s.default.create({baseURL:u.T5,timeout:1e3});function c(){return{signInMutation:(0,o.useMutation)({mutationFn:function(e){return a.post(u.T5+"/v1/auth/sign-in",e)}})}}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function l(e){return(0,o.useQuery)(f({},e,{queryKey:["profile"],queryFn:function(){return a.get(u.T5+"/v1/auth/profile")}}))}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function h(e,t){return void 0===e&&(e={page:1,limit:10}),(0,o.useQuery)(p({},t,{queryKey:["users",e.page,e.limit],queryFn:function(){return a.get(u.T5+"/v1/users",{params:e})}}))}a.interceptors.request.use((function(e){var t;return e.headers.Authorization="Bearer "+(null==(t=n.useAuthStore.getState().auth)?void 0:t.accessToken),e}),(function(e){return console.log("request error",e),Promise.reject(e)})),a.interceptors.response.use((function(e){return e}),(function(e){var t;return 401===(null==(t=e.response)?void 0:t.status)&&n.useAuthStore.setState({auth:void 0}),Promise.reject(e)}))}}]);